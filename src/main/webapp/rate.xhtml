<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
   <h:head />
   <h:body>
      <h:form id="ratesForm">
         <style type="text/css">.ui-datatable-header {
         height: 50px
         }
         </style>
         
         <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
            
            <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            	<h:outputText value="Loading..."></h:outputText>
            </p:dialog>
         
    <p:tabView>
           <p:tab title="AltinKaynak">
                    
         <p:dataTable id="rates" var="rate" value="#{rateBean.rates.rateList}">
            <f:facet name="header">
               Rates
               <p:commandButton id="toggler" type="button" value="Columns" style="float:right" icon="pi pi-align-justify" />
               <p:columnToggler datasource="rates" trigger="toggler" />
               <p:commandButton process="@this" action="#{rateBean.refresh}" id="updater" update="rates" value="Refresh" style="float:left" />
            </f:facet>
            <p:column headerText="Code" sortBy="#{rate.code}">
               <h:outputText value="#{rate.code}" />
            </p:column>
            <p:column headerText="Name" sortBy="#{rate.name}">
               <h:outputText value="#{rate.name}" />
            </p:column>
            <p:column headerText="Buy" sortBy="#{rate.buy}">
               <h:outputText value="#{rate.buy} TRY" />
            </p:column>
            <p:column headerText="Sell" sortBy="#{rate.sell}">
               <h:outputText value="#{rate.sell} TRY" />
            </p:column>
            <p:column headerText="Last Update" sortBy="#{rate.lastUpdate}">
               <h:outputText value="#{rate.lastUpdate}">
                  <f:convertDateTime pattern="dd.MM.yyyy HH:mm:ss" />
               </h:outputText>
            </p:column>
         </p:dataTable>
           </p:tab>
           <p:tab title="Milliyet">
                    <p:dataTable id="mrates" var="rate" value="#{rateBean.milliyetRates.rateList}">
            <f:facet name="header">
               Rates
               <p:commandButton id="mtoggler" type="button" value="Columns" style="float:right" icon="pi pi-align-justify" />
               <p:columnToggler datasource="mrates" trigger="mtoggler" />
               <p:commandButton process="@this" action="#{rateBean.refreshMilliyet}" id="mupdater" update="mrates" value="Refresh" style="float:left" />
            </f:facet>
            <p:column headerText="Name" sortBy="#{rate.name}">
               <h:outputText value="#{rate.name}" />
            </p:column>
            <p:column headerText="Buy" sortBy="#{rate.buy}">
               <h:outputText value="#{rate.buy} TRY" />
            </p:column>
            <p:column headerText="Sell" sortBy="#{rate.sell}">
               <h:outputText value="#{rate.sell} TRY" />
            </p:column>
            <p:column headerText="Last Update" sortBy="#{rate.lastUpdate}">
               <h:outputText value="#{rate.lastUpdate}">
                  <f:convertDateTime pattern="HH:mm" />
               </h:outputText>
            </p:column>
         </p:dataTable>
           </p:tab>
       </p:tabView>

         
      </h:form>
   </h:body>
</html>